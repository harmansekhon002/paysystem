<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payroll & Budget Management System</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Authentication Screen -->
    <div id="authScreen" class="auth-container active">
        <div class="auth-box">
            <h1>üí∞ Payroll System</h1>
            
            <div class="auth-tabs">
                <button id="loginTabBtn" class="tab-btn active" onclick="switchAuthTab('login')">Login</button>
                <button id="signupTabBtn" class="tab-btn" onclick="switchAuthTab('signup')">Sign Up</button>
            </div>

            <div id="authError" class="error-message"></div>

            <!-- Login Tab -->
            <div id="loginTab" class="auth-tab active">
                <form onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label>Email</label>
                        <input 
                            type="email" 
                            id="loginEmail" 
                            placeholder="test@test.com"
                            required
                        />
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input 
                            type="password" 
                            id="loginPassword" 
                            placeholder="test123"
                            required
                        />
                    </div>
                    <button type="submit" class="btn btn-primary">Login</button>
                </form>
            </div>

            <!-- Signup Tab -->
            <div id="signupTab" class="auth-tab">
                <form onsubmit="handleSignup(event)">
                    <div class="form-group">
                        <label>Name</label>
                        <input 
                            type="text" 
                            id="signupName" 
                            placeholder="Your Name"
                            required
                        />
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input 
                            type="email" 
                            id="signupEmail" 
                            placeholder="your@email.com"
                            required
                        />
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input 
                            type="password" 
                            id="signupPassword" 
                            placeholder="Enter password"
                            required
                        />
                    </div>
                    <button type="submit" class="btn btn-primary">Sign Up</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="mainApp" class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-left">
                <h1>üí∞ Payroll & Budget Manager</h1>
            </div>
            <div class="header-right">
                <span id="userName" class="user-name"></span>
                <button onclick="handleLogout()" class="btn btn-secondary">Logout</button>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="app-nav">
            <button class="nav-btn active" data-tab="dashboard" onclick="switchTab('dashboard')">üìä Dashboard</button>
            <button class="nav-btn" data-tab="shifts" onclick="switchTab('shifts')">‚è∞ Shifts</button>
            <button class="nav-btn" data-tab="workplaces" onclick="switchTab('workplaces')">üè¢ Workplaces</button>
            <button class="nav-btn" data-tab="expenses" onclick="switchTab('expenses')">üí≥ Expenses</button>
            <button class="nav-btn" data-tab="goals" onclick="switchTab('goals')">üéØ Goals</button>
            <button class="nav-btn" data-tab="budget" onclick="switchTab('budget')">üí∞ Budget</button>
        </nav>

        <!-- Content Area -->
        <main class="app-content">
            <!-- Dashboard Tab -->
            <section id="dashboard" class="tab-content active">
                <div class="dashboard-grid">
                    <div class="stat-card">
                        <div class="stat-label">This Week</div>
                        <div class="stat-value" id="weekEarnings">$0.00</div>
                        <div class="stat-subtitle" id="weekHours">0 hours</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">This Fortnight</div>
                        <div class="stat-value" id="fortnightEarnings">$0.00</div>
                        <div class="stat-subtitle" id="fortnightHours">0 hours</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Total Expenses</div>
                        <div class="stat-value" id="totalExpenses">$0.00</div>
                        <div class="stat-subtitle">This fortnight</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Available</div>
                        <div class="stat-value" id="availableBalance">$0.00</div>
                        <div class="stat-subtitle">After expenses</div>
                    </div>
                </div>

                <div class="dashboard-section">
                    <h3>Recent Shifts</h3>
                    <div id="recentShifts" class="shifts-list"></div>
                </div>

                <div class="dashboard-section">
                    <h3>Top Goals</h3>
                    <div id="topGoals" class="goals-list"></div>
                </div>
            </section>

            <!-- Shifts Tab -->
            <section id="shifts" class="tab-content">
                <div class="section-header">
                    <h2>Shifts</h2>
                    <button class="btn btn-primary" onclick="showShiftModal()">+ Add Shift</button>
                </div>

                <div id="shiftsContainer" class="shifts-list">
                    <p class="empty-message">No shifts yet. Add one to get started!</p>
                </div>
            </section>

            <!-- Workplaces Tab -->
            <section id="workplaces" class="tab-content">
                <div class="section-header">
                    <h2>Workplaces</h2>
                    <button class="btn btn-primary" onclick="showWorkplaceModal()">+ Add Workplace</button>
                </div>

                <div id="workplacesContainer" class="workplaces-grid">
                    <p class="empty-message">No workplaces yet. Add one to get started!</p>
                </div>
            </section>

            <!-- Expenses Tab -->
            <section id="expenses" class="tab-content">
                <div class="section-header">
                    <h2>Expenses</h2>
                    <button class="btn btn-primary" onclick="showExpenseModal()">+ Add Expense</button>
                </div>

                <div id="expensesContainer" class="expenses-list">
                    <p class="empty-message">No expenses yet. Add one to get started!</p>
                </div>
            </section>

            <!-- Goals Tab -->
            <section id="goals" class="tab-content">
                <div class="section-header">
                    <h2>Financial Goals</h2>
                    <button class="btn btn-primary" onclick="showGoalModal()">+ Add Goal</button>
                </div>

                <div id="goalsContainer" class="goals-list">
                    <p class="empty-message">No goals yet. Add one to start saving!</p>
                </div>
            </section>

            <!-- Budget Tab -->
            <section id="budget" class="tab-content">
                <div class="section-header">
                    <h2>Budget Overview</h2>
                </div>

                <div class="budget-summary">
                    <div class="budget-item">
                        <span class="label">Total Income:</span>
                        <span class="value" id="budgetIncome">$0.00</span>
                    </div>
                    <div class="budget-item">
                        <span class="label">Total Expenses:</span>
                        <span class="value" id="budgetExpenses">$0.00</span>
                    </div>
                    <div class="budget-item">
                        <span class="label">Goal Savings:</span>
                        <span class="value" id="budgetGoals">$0.00</span>
                    </div>
                    <div class="budget-item total">
                        <span class="label">Available:</span>
                        <span class="value" id="budgetRemaining">$0.00</span>
                    </div>
                </div>

                <div class="budget-breakdown">
                    <h3>Expense Breakdown</h3>
                    <div id="expenseBreakdown" class="breakdown-list"></div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modals -->
    <!-- Shift Modal -->
    <div id="shiftModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="shiftModalTitle">Add Shift</h2>
                <button class="close-btn" onclick="document.getElementById('shiftModal').classList.remove('active')">&times;</button>
            </div>
            <form id="shiftForm" onsubmit="saveShift(event)">
                <input type="hidden" id="shiftId" />
                <div class="form-group">
                    <label>Workplace</label>
                    <select id="shiftWorkplace" required>
                        <option value="">Select workplace</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Date</label>
                    <input type="date" id="shiftDate" required />
                </div>
                <div class="form-group">
                    <label>Start Time</label>
                    <input type="time" id="shiftStart" />
                </div>
                <div class="form-group">
                    <label>End Time</label>
                    <input type="time" id="shiftEnd" />
                </div>
                <div class="form-group">
                    <label>Hours</label>
                    <input type="number" id="shiftHours" step="0.5" required />
                </div>
                <div class="form-group">
                    <label>Notes</label>
                    <textarea id="shiftNotes" rows="3"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Save Shift</button>
            </form>
        </div>
    </div>

    <!-- Workplace Modal -->
    <div id="workplaceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="workplaceModalTitle">Add Workplace</h2>
                <button class="close-btn" onclick="document.getElementById('workplaceModal').classList.remove('active')">&times;</button>
            </div>
            <form id="workplaceForm" onsubmit="saveWorkplace(event)">
                <input type="hidden" id="workplaceId" />
                <div class="form-group">
                    <label>Workplace Name</label>
                    <input type="text" id="workplaceName" required />
                </div>
                <div class="form-group">
                    <label>Base Rate ($/hour)</label>
                    <input type="number" id="baseRate" step="0.01" required />
                </div>
                <div class="form-group">
                    <label>Saturday Multiplier</label>
                    <input type="number" id="saturdayMultiplier" step="0.1" value="1.5" />
                </div>
                <div class="form-group">
                    <label>Sunday Multiplier</label>
                    <input type="number" id="sundayMultiplier" step="0.1" value="2.0" />
                </div>
                <div class="form-group">
                    <label>Public Holiday Multiplier</label>
                    <input type="number" id="publicHolidayMultiplier" step="0.1" value="2.5" />
                </div>
                <div class="form-group">
                    <label>Overtime Multiplier</label>
                    <input type="number" id="overtimeMultiplier" step="0.1" value="1.5" />
                </div>
                <div class="form-group">
                    <label>Overtime Threshold (hours)</label>
                    <input type="number" id="overtimeThreshold" step="0.5" value="8" />
                </div>
                <button type="submit" class="btn btn-primary">Save Workplace</button>
            </form>
        </div>
    </div>

    <!-- Expense Modal -->
    <div id="expenseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="expenseModalTitle">Add Expense</h2>
                <button class="close-btn" onclick="document.getElementById('expenseModal').classList.remove('active')">&times;</button>
            </div>
            <form id="expenseForm" onsubmit="saveExpense(event)">
                <input type="hidden" id="expenseId" />
                <div class="form-group">
                    <label>Category</label>
                    <select id="expenseCategory" required>
                        <option value="">Select category</option>
                        <option value="Rent">Rent</option>
                        <option value="Groceries">Groceries</option>
                        <option value="Utilities">Utilities</option>
                        <option value="Transport">Transport</option>
                        <option value="Entertainment">Entertainment</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Amount</label>
                    <input type="number" id="expenseAmount" step="0.01" required />
                </div>
                <div class="form-group">
                    <label>Due Date</label>
                    <input type="date" id="expenseDueDate" />
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="expenseRecurring" />
                        Recurring Expense
                    </label>
                </div>
                <div class="form-group">
                    <label>Notes</label>
                    <textarea id="expenseNotes" rows="3"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Save Expense</button>
            </form>
        </div>
    </div>

    <!-- Goal Modal -->
    <div id="goalModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="goalModalTitle">Add Goal</h2>
                <button class="close-btn" onclick="document.getElementById('goalModal').classList.remove('active')">&times;</button>
            </div>
            <form id="goalForm" onsubmit="saveGoal(event)">
                <input type="hidden" id="goalId" />
                <div class="form-group">
                    <label>Goal Name</label>
                    <input type="text" id="goalName" required />
                </div>
                <div class="form-group">
                    <label>Target Amount</label>
                    <input type="number" id="goalTargetAmount" step="0.01" required />
                </div>
                <div class="form-group">
                    <label>Deadline</label>
                    <input type="date" id="goalDeadline" />
                </div>
                <div class="form-group">
                    <label>Auto-Allocate ($/fortnight)</label>
                    <input type="number" id="goalAutoAllocate" step="0.01" value="0" />
                </div>
                <div class="form-group">
                    <label>Priority</label>
                    <select id="goalPriority">
                        <option value="1">High</option>
                        <option value="2">Medium</option>
                        <option value="3">Low</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Save Goal</button>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="app.js"></script>

    <script>
        // Initialize app on page load
        document.addEventListener('DOMContentLoaded', function() {
            if (isLoggedIn()) {
                document.getElementById('authScreen').classList.remove('active');
                loadAllData();
                setupEventListeners();
            }
        });
    </script>
</body>
</html>
